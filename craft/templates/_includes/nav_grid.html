<div class="row">
  <div class="col-xs-10{% if
    header.navigationType == 'gridLeft' or
    header.navigationType == 'gridRight'
  %}
    col-lg-6
  {% else %}
    col-lg-3
  {% endif %}">
    <a id="logo" class="link-thick" href="{{ url('/') }}">{%- include "_images/logo" with {'class': 'logo'} -%}</a>
  </div>

  <div class="hidden-md-down
  {% if
    header.navigationType == 'gridLeft' or
    header.navigationType == 'gridRight'
  %} col-lg-6{% else
  %} col-lg-9{% endif %}">

    {% macro addNodeToNavigation(node, index) %}
      {%- set nodeClasses = [] -%}
      {%- if node.hasChildren -%}
          {%- set nodeClasses = nodeClasses|merge(['has-children']) -%}
      {%- endif -%}
      {%- if node.active or node.hasActiveChild -%}
          {%- set nodeClasses = nodeClasses|merge(['link-active']) -%}
      {%- endif -%}
      {%- if node.level == 1 and index == 1 -%}
          {%- set nodeClasses = nodeClasses|merge(['first']) -%}
      {%- endif -%}
      {%- if node.listClass|length -%}
          {%- set nodeClasses = nodeClasses|merge([node.listClass]) -%}
      {%- endif -%}

      <div class="py-0 {% if nodeClasses|length %}{{ nodeClasses|join(' ') }}{% endif %}{% if header.navigationType == 'gridRight' or header.navigationType == 'gridLeft' %} col-xs-3{% else %} col-xs-2{% endif %}{% if header.navigationType == 'gridRight' or header.navigationType == 'gridRightWide' %} text-xs-right float-xs-right{% endif %}">
        <a href="{{ node.url }}" class="link-thick" title="{{ node.name }}"{% if node.blank %} target="_blank"{% endif %}>{{ node.name }}</a>
          {% if node.hasChildren %}
            <div class="nav__level{{ (node.level + 1) }}">
              {% for subnode in node.children %}
                {{ _self.addNodeToNavigation(subnode, loop.index) }}
              {% endfor %}
            </div>
          {% endif %}
      </div>
    {% endmacro %}

    <div class="row">
      {% if header.navigationType == 'gridLeft' or header.navigationType == 'girdLeftWide' %}

        {% if nav|length or navSub|length %}
          {% if nav|length %}
            {% for node in nav %}
              {{ _self.addNodeToNavigation(node, loop.index) }}
            {% endfor %}
          {% endif %}
          {% if navSub|length %}
            {% for node in navSub %}
                {{ _self.addNodeToNavigation(node, loop.index) }}
            {% endfor %}
          {% endif %}
        {% endif %}

      {% else %}

        {% if nav|length or navSub|length %}
          {% if navSub|length %}
            {% for node in navSub|reverse %}
                {{ _self.addNodeToNavigation(node, loop.index) }}
            {% endfor %}
          {% endif %}
          {% if nav|length %}
            {% for node in nav|reverse %}
              {{ _self.addNodeToNavigation(node, loop.index) }}
            {% endfor %}
          {% endif %}
        {% endif %}

      {% endif %}
    </div>
  </div>

  <div class="col-xs-2 hidden-lg-up">
    {% include '_includes/nav_toggler' %}
  </div>
</div>
