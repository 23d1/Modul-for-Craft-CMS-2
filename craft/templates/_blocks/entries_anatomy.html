{% set image = entry.imageFile.first() %}
{% set video = entry.videoFile.first() %}
{% set grid = entry.grid %}
{% set offset = entry.offset %}
{% set pull = entry.pull %}
{% set bleed = entry.bleed %}
{% set moveHorizontal = entry.moveHorizontal %}
{% set moveVertical = entry.moveVertical %}
{% set layer = entry.layer %}
{% set shadow = entry.shadow %}

{% set originalWidth = image.getWidth(false) %}
{% set transformedWidth = image.getWidth(transform) %}
{% if transformedWidth < originalWidth %}
  {% set thumbnail = image.getUrl(transform) %}
{% else %}
  {% set thumbnail = image.getUrl() %}
{% endif %}

<div class="masonry-item {% if grid|length %}col-xs-12 {% if grid == 1 or grid == 2 or grid == 3 or grid == 4 or grid == 5 %}col-sm-6{% else %}col-sm-12{% endif %} col-md-{{ grid }} col-lg-{{ grid }} col-xl-{{ grid }}{% endif %}{% if offset|length %} col-sm-offset-0 col-md-offset-{{ offset }} col-lg-offset-{{ offset }} col-xl-offset-{{ offset }}{% endif %}{% if bleed == "left" %} bleed-left{% elseif bleed == "right" %} bleed-right{% elseif bleed == "both" %} bleed-both{% endif %}{% if item.pull|length %} {{ item.pull }}{% endif %}">
  <div class="hv-item {{ moveHorizontal }} {{ moveVertical }}">
    <div class="move" style="z-index: {{ layer }};">
      <a href="{{ entry.url }}" class="thumb">
        <div class="image-holder{% if shadow %} shadow{% endif %}">
          {% if video|length %}
            <div class="video-bg">
              <div class="video-inline cover align-center align-middle">
                <div class="video-padding"></div>
                <video poster="{{ thumbnail }}" playsinline autoplay muted loop>
                  <source src="{{ video.getUrl() }}" type="video/mp4">
                </video>
              </div>
            </div>
          {% endif %}
          <img class="img-fluid lazyload" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="{{ thumbnail }}" alt="{{ entry.title }}" data-width="{{ image.getWidth(transform) }}" data-height="{{ image.getHeight(transform) }}">
          <div class="slide-spin"></div>
          <div class="thumb-hover">
            <div class="thumb-hover-title">
              <h5>
                {{ entry.title }}
              </h5>
            </div>
            <div class="thumb-hover-bg"></div>
          </div>
        </div>
      </a>
    </div>
  </div>
</div>
