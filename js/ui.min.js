$.fn.hasAttr=function(e){return void 0!==this.attr(e)},$.fn.outerHTML=function(){return this.length?this[0].outerHTML||function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var i=t.innerHTML;return t=null,i}(this[0]):this},$(document).ready(function(){function e(){$("#pageloader").fadeIn(400)}function i(){$("#pageloader").fadeOut(400)}function o(){$("#content img").each(function(){$(this).hasClass("notme")||(parentwidth=$(this).parent().width(),imgwidth=$(this).attr("data-width"),imgheight=$(this).attr("data-height"),imgdim=imgwidth/imgheight,newheight=parentwidth/imgdim,newheight=Math.round(newheight),$(this).width(parentwidth),$(this).height(newheight))})}function n(){var e=$("video.video,audio");e.mediaelementplayer({videoWidth:"100%",videoHeight:"100%",audioWidth:"100%",startVolume:1,features:["playpause","progress","tracks","volume","fullscreen"],videoVolume:"horizontal",iPadUseNativeControls:!0,iPhoneUseNativeControls:!0,AndroidUseNativeControls:!0})}function a(){$("#content .video-inline.cover").each(function(e){video=$(this).find($("video")),width=video[0].videoWidth,height=video[0].videoHeight,padding=height/width*100,$(this).find(".video-padding").css("padding-bottom",padding+"%")})}function s(){var e=$(".packery");e.packery({itemSelector:".masonry-item",transitionDuration:0})}function r(){A=$("#footer").height(),l(),h(),s(),n()}function d(e,t){newspeed=t,S=$(document).height(),distance=e-_,distance=Math.abs(distance),ratio=distance/T,newspeed*=ratio,newspeed=Math.round(newspeed),newspeed>x&&(newspeed=x),newspeed=10*Math.round(newspeed/10),e=Math.round(e),newspeed<N&&(newspeed=N),_!=e&&$("body, html").animate({scrollTop:""+e+"px"},newspeed,"easeInOutQuart",function(){})}function h(){$(".royalSlider.default-slideshow").each(function(){t=$(this),parentwidth=t.parent().width(),parentheight=t.parent().height(),slideshow_firstimg_w=t.find(".rsImg").first().attr("data-rsw"),slideshow_firstimg_h=t.find(".rsImg").first().attr("data-rsh"),slideshow_dim=slideshow_firstimg_w/slideshow_firstimg_h,slideshow_w=t.parent().width(),t.hasAttr("data-slideshow-viewportheight")?slideshow_h=parentheight:slideshow_h=slideshow_w/slideshow_dim,t.width(parentwidth).height(slideshow_h),t.royalSlider("updateSliderSize",!0)})}function l(){$("#footer").length&&(footerpos=$("#footer").position().top,wrapbottom=$("#wrap").css("margin-bottom"),wrapbottom=wrapbottom.replace("px",""),footerpos+A<C?(diff=C-(footerpos+A)-wrapbottom,$("#footer").css({"padding-top":""+diff+"px"})):$("#footer").css({"padding-top":"0px"}))}function c(){slide_id=0,clicksupport=!1,dragsupport=!1,slideshow_w=null,slideshow_h=null,$(".royalSlider.default-slideshow").each(function(){var e=$(this),t={fullscreen:{enabled:!1,nativeFS:!0},autoPlay:{pauseOnHover:!1,stopAtAction:!1,delay:4e3},addActiveClass:!0,autoScaleSlider:!1,autoHeight:!1,autoScaleSliderWidth:slideshow_w,autoScaleSliderHeight:slideshow_h,loop:!1,loopRewind:!0,navigateByClick:!0,sliderDrag:!0,numImagesToPreload:6,slidesSpacing:0,imageScalePadding:0,arrowsNavAutoHide:!0,arrowsNavHideOnTouch:!0,keyboardNavEnabled:!1,fadeinLoadedSlide:!0,globalCaption:!1,globalCaptionInside:!1,slideTransitionEasing:"easeInOutQuart",transitionSpeed:slideshow_speed,visibleNearby:{centerArea:.75,center:!0,breakpoint:650,breakpointCenterArea:.8,navigateByCenterClick:!0},thumbs:{appendSpan:!1,firstMargin:!0,paddingBottom:4}};e.length&&(e.hasAttr("data-slideshow-transition")?t.transitionType=e.attr("data-slideshow-transition"):t.transitionType="fade",e.hasAttr("data-slideshow-autoplay")&&"1"==e.attr("data-slideshow-autoplay")?t.autoPlay.enabled=!0:t.autoPlay.enabled=!1,e.hasAttr("data-slideshow-delay")&&e.attr("data-slideshow-delay")>0&&(t.autoPlay.delay=1e3*e.attr("data-slideshow-delay")),"visibleNearby"==e.attr("data-slideshow-type")?(t.visibleNearby.enabled=!0,t.transitionType="move",t.imageScaleMode="fit",e.hasAttr("data-slideshow-arrows")&&("1"==e.attr("data-slideshow-arrows")?t.arrowsNav=!0:t.arrowsNav=!1),e.hasAttr("data-slideshow-indicator")?t.controlNavigation=e.attr("data-slideshow-indicator"):t.controlNavigation="none"):(t.visibleNearby.enabled=!1,t.imageScaleMode="fill",e.hasAttr("data-slideshow-arrows")&&("1"==e.attr("data-slideshow-arrows")?t.arrowsNav=!0:t.arrowsNav=!1)),e.hasAttr("data-slideshow-autohide")&&("1"==e.attr("data-slideshow-autohide")?t.arrowsNavAutoHide=!0:t.arrowsNavAutoHide=!1),e.hasAttr("data-slideshow-indicator")?t.controlNavigation=e.attr("data-slideshow-indicator"):t.controlNavigation="none",e.royalSlider(t),slider=e.data("royalSlider"),slider.ev.on("rsAfterSlideChange",function(e){slide_id=slider.currSlideId,BackgroundCheck.refresh()}),e.find(".rsArrowLeft .rsArrowIcn").html('<svg viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><use x="0" y="0" xlink:href="#arrowLeft" /></svg>'),e.find(".rsArrowRight .rsArrowIcn").html('<svg viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><use x="0" y="0" xlink:href="#arrowRight" /></svg>'))}),r()}function u(){$("body").removeClass("menu-open")}function w(){$("body.mobile a").not("a.thumb").addClass("hover"),$("body.mobile a.thumb").on("click",function(e){"use strict";var t=$(this);return!!t.hasClass("hover")||(t.addClass("hover"),$("a").not(this).removeClass("hover"),e.preventDefault(),!1)})}function f(){if(header_autohide){var e,t=0,i=$(document),o=$(window),n=$("#header");e=Modernizr.touch?150:25,o.scroll(function(){var a=$(this).scrollTop();if(Math.abs(t-a)>=e&&a>0){if(a>t){var s=i.height()-(i.scrollTop()+o.height());s>50?n.addClass("is-hidden"):n.removeClass("is-hidden")}else a>50?n.removeClass("is-hidden"):n.removeClass("is-hidden");t=a}}),BackgroundCheck.refresh()}}function g(){slide_objects&&$("#content div.hv-item").each(function(){var e=p($(this))[1];0===e?$(this).css("transform","translate(0, 150px)"):1===e&&$(this).css("transform","translate(0, -150px)"),new Waypoint.Inview({element:$(this)[0],enter:function(e){$(this.element).css("transform","translate(0, 0)")},exited:function(e){"down"===e?$(this.element).css("transform","translate(0, -150px)"):$(this.element).css("transform","translate(0, 150px)")}})})}function p(e){var t=($(window).width(),$(window).height()),i=e.width(),o=e.height(),n=e[0].getBoundingClientRect(),a=n.left-t,s=n.left+i,r=n.top-t,d=n.top+o;return[Math.max(0,Math.min((0-a)/(s-a),1)),Math.max(0,Math.min((0-r)/(d-r),1))]}function m(){setTimeout(function(){$(".image-holder")[0]&&BackgroundCheck.init({targets:"#logo, #header a, #menu-btn, #menu-sandwich",images:".img-fluid, .img-bg"})},100),BackgroundCheck.refresh()}function v(){w(),f(),o(),c(),r(),"1"==$("#block").attr("data-styling")&&$("#wrap").addClass("has-styling")}function b(){g(),c(),s(),n(),a(),r(),setTimeout(function(){m(),r()},100)}function y(){w(),f(),o(),c(),s(),n(),r(),setTimeout(function(){r(),m(),a(),g()},100)}var C=$(window).height(),k=$(window).width(),S=$(document).height(),A=$("#footer").height();v(),$("#wrap").smoothState({debug:!1,prefetch:!1,repeatDelay:500,cacheLength:0,blacklist:".no-ajax, form, .form-toggle, .submit",onBefore:function(e,t){t.removeClass("has-styling")},onStart:{duration:600,render:function(t){t.addClass("is-exiting"),u(),e()}},onReady:{duration:100,render:function(e,t){e.html(t),y()}},onAfter:function(){"1"==$("#block").attr("data-styling")&&$("#wrap").addClass("has-styling"),$("#wrap").removeClass("is-exiting"),r(),i()}}),$(document).on("ajaxComplete",function(e,t,i){"function"==typeof ga&&ga("send","pageview",window.location.pathname)});var _=0,x=800,N=400,T=1e3;$("body").on("click",".slideshow-holder",function(e){e.preventDefault(),slide=$(this).parent().parent(),slideoffset=slide.offset().top,slideheight=slide.height(),slidecorrection=(C-slideheight)/2,slidecorrection<0&&(slidecorrection=0),position=slideoffset-slidecorrection,d(position,600)}),$("body").on("click","#menu-btn, #menu-sandwich .menu-icon",function(){$("body").toggleClass("menu-open"),setTimeout(function(){BackgroundCheck.refresh()},100),setTimeout(function(){BackgroundCheck.refresh()},300),setTimeout(function(){BackgroundCheck.refresh()},600)}),$("body").on("click","#menu-slide a",function(){$("body").removeClass("menu-open")}),$("body").on("click","#page-cover",function(){$("body").removeClass("menu-open")}),$(window).resize(function(){C=$(window).height(),k=$(window).width(),S=$(document).height(),r()}),$(window).bind("orientationchange",function(){$(window).resize()}),$(window).ready(function(){b(),setTimeout(function(){$("#wrap").removeClass("is-entering")},100)}),$(window).bind("load",function(){r()}),$(window).bind("orientationchange",function(){$(window).resize()}),$(document).on("lazybeforeunveil",function(){r(),m()})});